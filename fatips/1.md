| FATIP | Title                       | Status   | Category       | Author                             | Created    |
| ----- | --------------------------- | -------- | -------------- | ---------------------------------- | ---------- |
| 1     | Non-Fungible Token Standard | Accepted | Token Standard | Devon Katz \<<devonk@dbgrow.com>\> | 2018-07-27 |



# Overview

This document describes the **FAT-1** token standard: A non-fungible (NF) token standard. This this standard allows for token systems supporting unique, indivisible tokens issued in whole units. It is most equivalent to Ethereum's ERC-721 token standard.



# Motivation

Offer an efficient non-fungible token system, allowing attachment of arbitray metadata to issued tokens. Allow unique, indivisible, and traceable assets on top of FAT.



# Specification `inherits` [FATIP-0](0.md)

FATIP-1 draws heavily upon the  [FATIP-0](0.md) fungible token standard for it's data structures and signing.

All core functionality from FATIP-0 is inherited by this standard, unless otherwise specified or overridden. Equivalent section headers will define which functionality is built upon, modified, or replaced.



## Non-Fungible Token IDs

Non-fungible tokens issued on FATIP-1 are uniquely identified by an non-negative integer ID. For example, token ID `5`.

### Token ID Ranges

 FATIP-1 has the unique ability to specify sequential ranges of non-fungible token IDs during issuance and transaction. For example, the range `{"min": 0, "max":4410}` represents the range of token IDs `0` to `4410`, inclusive.

#### Token ID Range Object Validation

- The range object must contain the keys `min` and `max`. No additional keys are allowed.
- The values of `min` and `max` must be non-negative integers
- `min` must be less than `max`



### Token ID Range Collections

In transactions, multiple ID ranges and single IDs are allowed for more flexibility. For example `[{"min": 0, "max":4410}, 9999]` represents the range of token IDs  `0` to `4410`, inclusive, plus token ID `9999`.

#### Token ID Range Collection Validation

- The collection may not be empty
- Each element in the collection must be a valid token ID or ID range object
- There may be no duplicate single token IDs
  - For example,  `[0, 0]` is invalid
- There may be no overlap between a range and a single token ID
  - For example,  `[{"min": 0, "max":5}, 5]` is invalid
- There may be no overlap between ranges
  - For example, `[{"min": 0, "max":5}, {"min": 2, "max":6}]` is invalid.



## Token Initialization Entry

### Initialization Entry Content Example

```json
{
  "type": "FAT-1",
  "supply": 10000000,
  "symbol": "ENFT",
  "metadata": {"receiptId": "fv1ykh3e98uc"}
}
```

### Initialization Entry Field Summary & Validation

| Name       | Type   | Description                                                  | Validation                                                   | Required |
| ---------- | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ | -------- |
| `type`     | string | The type of this token issuance                              | Must equal 'FAT-1'                                           | Y        |
| `supply`   | number | The maximum possible number of tokens that can ever be issued | Must be greater than 0, or -1 for an unlimited supply. All other values are invalid. | Y        |
| `symbol`   | string | The display symbol of the token                              | Must be A-Z, and 1-4 characters in length                    | N        |
| `metadata` | any    | Optional metadata defined by the Issuer                      | This may be any valid JSON type.                             | N        |



## Token Transaction Entry

### Transaction Entry Content Example

```json
{
   "inputs:": {
      "FA1zT4aFpEvcnPqPCigB3fvGu4Q4mTXY22iiuV69DqE1pNhcaLYM": [0, {"min": 10, "max":4410}],
      "FA2y6VYYPR9Y9Vyy1ZuZqWWRXGXLeuvsLWGkDxq3Ed7yc11dbBKV": [4411]
   },
   "outputs:": {
      "FA3aECpw3gEZ7CMQvRNxEtKBGKAos3922oqYLcHQ9Nqw9e8f3LIO": [0,{"min": 10, "max":4410}, 4411]
   },
   "metadata": {"memo": "thanks for the unique tokens!"},
    "tokenmetadata": [
        {
        "ids":[0, 2],
        "metadata": "These are the good ones ;)"
    	}
    ]
}
```

### Transaction Entry JSON Field Summary & Validation

| Name                        | Type   | Description                                                  | Validation                                                   | Required |
| --------------------------- | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ | -------- |
| `inputs`                    | object | The inputs of the transaction                                | Mapping of Public Factoid Address => Token ID Range Collection. Range collection must be valid. May not be empty or contain duplicate Addresses. | Y        |
| `outputs`                   | object | The outputs of the transaction                               | Mapping of Public Factoid Address => Token ID Range Collection. Token ID Range Collection must be valid. May not be empty or contain duplicate Addresses or any Addresses used in the `inputs`. All tokens listed in `inputs` must occur in `outputs` | Y        |
| `metadata`                  | any    | Optional metadata defined by user                            | This may be any valid JSON type.                             | N        |
| `tokenmetadata`             | array  | Optional metadata linked to the tokens being dispersed       | May only be included for a coinbase transaction (issuance).  | N        |
| `tokenmetadata[*]`          | object | An object containing the metadata for a collection of IDs or ID ranges | Must contain at least one element if `tokenmetadata` is specified. | Y*       |
| `tokenmetadata[*].ids`      | array  | A valid token ID range collection                            | Must be a valid token ID range collection. Required if `tokenmetadata[*]` is specified. | Y*       |
| `tokenmetadata[*].metadata` | any    | The metadata to associate with the IDs specified in `ids`    | This may be any valid JSON type. Required if `tokenmetadata[*]` is specified. | Y*       |

\* = conditional on an optional field, see validation column for criteria



## Transaction Validation Requirements

The following requirements are modified or appended from those inherited from FATIP-0:

### T.x Requirements for all transactions

The `T.2.1` requirement is overridden:

- T.2.1: All token ID's represented in the `inputs` token ID collection must appear in the `outputs` token ID collection.

### N.x Requirements for normal account-to-account transactions

The `N.2.2` requirement is overridden:

- N.2.2: The balances of each input address specified in `inputs` must own its respective token IDs or token ID ranges being transacted.

### C.x Requirements for Coinbase distribution transactions

The `C.2.1` requirement is overridden:

- C.2.1: The quantity of tokens being issued plus the quantities of tokens issued in all previous coinbase transactions must be less than or equal to `supply` from the
  Issuance entry (if not unlimited). Ranges are considered in expanded form (For example `{"min": 0,"max": 2}` is considered 3 tokens in the supply).

The additional `C.x` rule are appended following `C.2.1`:

- C.2.2: No token ID's contained in `inputs` may already be in circulation.

*Note: It is not required for token ID ranges to be issued continuously, or starting from `0`*



# Implementation

- [FAT Daemon & CLI](https://github.com/Factom-Asset-Tokens/fatd) (fatd) - Official FAT token daemon, API server, and CLI implementation
  - A program written in Go that tracks and validates FAT Token chains, and provides up an API for other applications to access FAT's data.
- [fat-js](https://github.com/Factom-Asset-Tokens/wallet) - Official FAT Javascript library for NodeJS & Browser
- [FAT Wallet](https://github.com/Factom-Asset-Tokens/wallet) - Official FAT Wallet UI



## Large Issuances & Realistic "Infinite" Supply

In the official fatd implementation, large scale token issuances can cause the daemon to hang for several seconds to process the first time they are encountered(one time only, first sync). It is currently recommended to split up large issuances into chunks spread out over many blocks, if possible, to improve user experience of syncing a token for the first time. The recommended issuance limit is approximately 10K tokens per block per initialized token.

While this standard specifies an infinite supply option, the current official implementation is software-limited by the [absolute sqlite row limit](https://www.sqlite.org/limits.html) of 2^64 rows per initialized token, as one row is required per issued non-fungible token.



# Copyright

Copyright and related rights waived via
[CC0](https://creativecommons.org/publicdomain/zero/1.0/).
